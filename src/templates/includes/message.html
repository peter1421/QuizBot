{% load static %}
{% if messages %}
  {% comment %} <ul class="messages">
    {% for message in messages %}
      <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
  </ul> {% endcomment %}
<div
  aria-live="polite"
  aria-atomic="true"
  style="position: fixed; bottom: 0; right: 0; min-height: 100px; max-width: 300px;">
  <!-- Position it -->
  <div>
    <!-- Then put toasts within -->
    {% for message in messages %}
    <div
      class="toast fade show"
      role="alert"
      aria-live="assertive"
      aria-atomic="true"
      style="margin-bottom: 5px;">
      <div class="toast-header">
        <svg
          class="bd-placeholder-img rounded mr-2"
          width="20"
          height="20"
          xmlns="http://www.w3.org/2000/svg"
          preserveAspectRatio="xMidYMid slice"
          focusable="false"
          role="img"
        >
          <rect width="100%" height="100%" fill="#007aff"></rect>
        </svg>
        {% comment %} <strong class="mr-auto">Bootstrap</strong> {% endcomment %}
        <strong class="mr-auto">{{ message.tags | default:"Notification" }}</strong>
        <small class="text-muted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;系統訊息</small>
        <button
          type="button"
          class="ml-2 mb-1 close"
          data-dismiss="toast"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="toast-body">{{ message }}</div>
    </div>
    {% endfor %}
  </div>
</div>
{% endif %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var toastElList = [].slice.call(document.querySelectorAll('.toast'))
    var toastList = toastElList.map(function (toastEl) {
      return new bootstrap.Toast(toastEl)
    });

    document.querySelectorAll('.toast .close').forEach(function (closeButton) {
      closeButton.addEventListener('click', function (event) {
        var toastElement = closeButton.closest('.toast');
        var toastInstance = bootstrap.Toast.getInstance(toastElement);
        toastInstance.hide();
      });
    });
  });
</script>